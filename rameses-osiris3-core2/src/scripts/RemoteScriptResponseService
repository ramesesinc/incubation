import com.rameses.annotations.*;
import com.rameses.osiris3.remote.*;
import java.rmi.server.*;

/*********************************************************************************
* This handles the remote script caching 
* We need this as a script because we want the client to be able to intercept
*********************************************************************************/
class RemoteScriptInvokerService {

    @XConnection("remote-script-mq")
    def remoteMq;

    @XConnection("remote-script-data-cache")
    def dataCache;

    @ProxyMethod
    public def postResponse( def resp ) {
        dataCache.put( resp.key, resp.data, 99999999 );
        remoteMq.send( [key:resp.key, tokenid:resp.tokenid], resp.tokenid );
    }

}
