<!--
DROP VIEW IF EXISTS `sys_user_role`;
CREATE VIEW `sys_user_role`
AS SELECT
   u.objid AS `objid`,
   u.lastname AS `lastname`,
   u.firstname AS `firstname`,
   u.middlename,
   u.username AS `username`,concat(`u`.`lastname`,', ',`u`.`firstname`) AS `name`,
   ug.role AS `role`,
   ug.domain AS `domain`,
   ugm.org_objid AS `orgid`,
   u.txncode,
   u.jobtitle,
   ugm.objid as usergroupmemberid, 
	ugm.usergroup_objid
FROM ((`sys_usergroup_member` `ugm` join `sys_usergroup` `ug` on((`ug`.`objid` = `ugm`.`usergroup_objid`))) join `sys_user` `u` on((`u`.`objid` = `ugm`.`user_objid`)));

-->	
<schema>
	<element tablename="sys_user_role">
		<field name="objid" primary="true" prefix="USRROLE"/>
		<field name="lastname" caption="Last Name" indexed="true" searchable="true"/>
		<field name="firstname" caption="First Name" indexed="true" searchable="true"/>
		<field name="middlename" caption="Middle Name" />
		<field name="name" caption="Name" visible="false" hidden="true"/>
		<field name="username" primary="true"/>
		<field name="role" caption="Role"/>
		<field name="domain" caption="Domain"/>
		<field name="orgid" caption="Org"/>

		<field name="txncode" caption="Txn Code"/>
		<field name="jobtitle" caption="Job Title"/>
	</element>
</schema> 